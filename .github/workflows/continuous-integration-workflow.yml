name: Digital Ocean Shiny simple Deploy
# This workflow is triggered on pushes to the repository.
on: [push]

jobs:
  build:
    name: build

    runs-on: ubuntu-18.04
    steps:
      - name: ssh to server and pull github repo
        run: |
          echo ${{ secrets.SERVER }}
          echo ${{ secrets.SSH_KEY }} > deployment_key.txt
          chmod 600 deployment_key.txt
          ssh -i deployment_key.txt root@${{ secrets.SERVER }} 'cd /srv/shiny-server/Shiny_meta_analyzer/; git checkout master; git pull;'